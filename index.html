<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="app.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <title>Admin Panel</title>
    <style>
      .movie-image {
        width: 15px;
        height: 15px;
      }
    </style>
    <script src="/controllers/horror.js"></script>
  </head>
  <body>
    <!-- Image and text -->
    <nav class="navbar navbar-light bg-light">
      <a class="navbar-brand" href="#">Admin Dashboard</a>
    </nav>
    <h1>Horror Movies</h1>
    <ul id="movieList"></ul>

    <script>
      fetch('http://localhost:3000/api/horror')
        .then(response => response.json())
        .then(data => {
          const movieList = document.getElementById('movieList');
          data.forEach(movie => {
            const li = document.createElement('li');

            const img = document.createElement('img');
            img.src = movie.image;
            img.alt = movie.name;
            img.classList.add('movieimage');
            li.appendChild(img);

            const nameSpan = document.createElement('span');
            nameSpan.textContent = movie.name;
            li.appendChild(nameSpan);

            const ratingSpan = document.createElement('span');
            ratingSpan.textContent = ` (${movie.rating})`;
            li.appendChild(ratingSpan);

            const yearSpan = document.createElement('span');
            yearSpan.textContent = ` - ${movie.year}`;
            li.appendChild(yearSpan);

            movieList.appendChild(li);
          });
        })
        .catch(error => console.error(error));
    </script>
    <form id="myForm">
      <div class="form-group">
        <label>Name</label>
        <input
          type="text"
          class="form-control"
          id="name"
          name="name"
          aria-describedby="movie name"
          placeholder="Enter the horror movie name"
        />
      </div>
      <div class="form-group">
        <label>Rating</label>
        <input
        step=0.01
        min=0
          type="number"
          class="form-control"
          id="rating"
          name="rating"
          aria-describedby="movie rating"
          placeholder="imdb rating"
  
        />
      </div>
      <div class="form-group">
        <label>Release Year</label>
        <input
          type="number"
          class="form-control"
          id="release_year"
          name="release_year"
          aria-describedby="movie release year"
          placeholder="release year"
        />
      </div>
      <div class="form-group">
        <label>Image</label>
        <input
          type="text"
          class="form-control"
          id="image"
          name="image"
          aria-describedby="movie image"
          placeholder="Enter the movie poster url"
        />
      </div>

      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
<script>
const myForm = document.getElementById('myForm');
myForm.addEventListener('submit', function(e) {
  e.preventDefault();

  const formData = new FormData(this);

  const data = {
    name: formData.get('name'),
    rating: formData.get('rating'),
    release_year:formData.get('release_year'),
    image:formData.get('image')
  };

  fetch('http://localhost:3000/api/horror/add', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  })
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error(error));
});

</script>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </body>
</html>